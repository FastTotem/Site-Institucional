<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/visaoGeral.css">
    <link rel="stylesheet" href="./css/dashboardMain.css">
    <link rel="website icon" type="png" href="./assets/IconFastTotem.png" />
    <script src="./js/visaoGeral/graficoUptime.js"></script>
    <script src="./js/visaoGeral/graficoComponentes.js"></script>
    <script src="./js/visaoGeral/problemas.js"></script>
    <script src="./js/visaoGeral/status.js"></script>
    <script src="./js/visaoGeral/data.js"></script>
    <script src="./js/floatingMenu.js" defer></script>

    <script src="./js/sideMenu.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>FastTotem | Visão Geral </title>
</head>

<body>

       <div class="perfilUser" id="perfilUser">
        <div class="conteudo-bloco-flutuante">
            <div class="infUser">
                <div class="nomeUser">Olá, <span id="nome_saudacao">Kauã</span></div>
            </div>
            <div class="options">
                <a href="perfilUsuario.html">Perfil</a>
                <a href="login.html" onclick="sessionStorage.clear()">Fazer logout</a>
            </div>
        </div>
    </div>

    <div class="side-menu" id="side-menu">
        <div class="container">

            <div class="logo">
                <img src="assets/FastToten - Logo.png" alt="">
            </div>

            <div class="icons">

                <a href="visaoGeral.html" class="active">
                    <img class="menu-icon" src="./assets/dashboard.png" alt="">
                    <div class="page-name">Visão Geral</div>
                </a>

                <a href="visaoEspecifica.html?idTotem=1">
                    <img class="menu-icon" src="./assets/binocular.png" alt="">
                    <div class="page-name">Visão Específica</div>
                </a>

                <a href="totens.html">
                    <img class="menu-icon" src="./assets/totem.png" alt="">
                    <div class="page-name">Totens</div>
                </a>

                <a href="funcionarios.html">
                    <img class="menu-icon" src="./assets/funcionarios.png" alt="">
                    <div class="page-name">Funcionários</div>
                </a>

                 <a href="parametros.html">
                    <img class="menu-icon" src="./assets/params.png" alt="">
                    <div class="page-name">Parâmetros</div>
                </a>

                <a href="relatorios.html">
                    <img class="menu-icon" src="./assets/specification.png" alt="">
                    <div class="page-name">Relatórios</div>
                </a>

            </div>
        </div>
    </div>
    <div class="dashboard">
        <div class="header">
            <div class="container">
                <div class="logo">
                    <h4>FastTotem</h4>
                </div>
                <h4 class="title">Visão Geral</h4>
                <div class="navbar">
                    <a onclick="abrirPerfil()"><img class="nav-icon" src="./assets/profile-user.png"
                            alt=""></a>
                    <a href="https://app.pipefy.com/public/form/C1FK3mWC"><img class="nav-icon"
                            src="./assets/customer-service.png" alt=""></a>
                </div>
            </div>
        </div>
        <main class="grid">
            <section class="top-cards">
                <div class="tooltip-card" id="tooltip-card1">
                    <div class="card-title">
                        <h1>Ocorrências críticas nos componentes - <span class="date"></span></h1>
                        <a onclick="openTooltip(1)"><img src="./assets/ajuda.png" alt=""></a>
                    </div>
                    <p>Este indicador mostra um resumo geral das ocorrências críticas dos componentes, uma ocorrência crítica é toda vez que o valor de captura de algum componente iguala ou supera o valor definido como crítico na aba parâmetros. Ele exibe o número de ocorrências em
                        diferentes componentes, como HD, RAM e CPU, além de apontar o mais recorrente e o total de ocorrências.</p>
                </div>
                <div class="component-list" id="card1">
                    <div class="card-title">
                        <h1>Ocorrências críticas nos componentes - <span class="date"></span></h1>
                        <a onclick="openTooltip(1)"><img src="./assets/ajuda.png" alt=""></a>
                    </div>
                    <div class="components">
                        <section>
                            <div class="component">
                                <h2>HD</h2>
                                <span><span id="OccHD">0</span> ocorrências</span>
                            </div>
                            <div class="component">
                                <h2>MEMORIA</h2>
                                <span><span id="OccRAM">0</span> ocorrências</span>
                            </div>
                            <div class="component">
                                <h2>Componente com mais ocorrências</h2>
                                <span id="OccMost">Nenhum</span>
                            </div>
                        </section>
                        <section>
                            <div class="component">
                                <h2>CPU</h2>
                                <span><span id="OccCPU">0</span> ocorrências</span>
                            </div>
                            <div class="component">
                                <h2>USB</h2>
                                <span><span id="OccUSB">0</span> ocorrências</span>
                            </div>
                            <div class="component">
                                <h2>Total de ocorrências</h2>
                                <span><span id="OccTotal">0</span> ocorrências</span>
                            </div>
                        </section>
                    </div>
                </div>
                <div class="tooltip-card" id="tooltip-card2">
                    <div class="card-title">
                        <h1>Status dos totens - <span class="date"></span></h1>
                        <a onclick="openTooltip(2)"><img src="./assets/ajuda.png" alt=""></a>
                    </div>
                    <p>Este indicador exibe o status atual de seus totens. Totens em estado 'Ok' não têm nenhum
                        componente com problema. Totens em estado de 'Alerta' têm pelo menos um componente com problema.
                        Totens em estado 'Crítico' têm dois ou mais componentes com problema. 'Desligados' indica o
                        número de totens desativados.
                    </p>
                </div>
                <div class="totem-status" id="card2">
                    <div class="card-title">
                        <h1>Status dos totens - <span class="date"></span></h1>
                        <a onclick="openTooltip(2)"><img src="./assets/ajuda.png" alt=""></a>
                    </div>
                    <div class="cards">
                        <a href="totens.html" class="card-status" id="green-card">
                            <span id="statusOk">0</span>
                            <h3>Ok</h3>
                            <div class="tooltip">Este é o número de totens em estado Ok (nenhum componente apresentando
                                problema).</div>
                        </a>
                        <a href="totens.html" class="card-status" id="yellow-card">
                            <span id="statusAlerta">0</span>
                            <h3>Alerta</h3>
                            <div class="tooltip">Este é o número de totens em estado de Alerta (1 componente
                                apresentando problema).</div>
                        </a>
                        <a href="totens.html" class="card-status" id="red-card">
                            <span id="statusCritico">0</span>
                            <h3>Crítico</h3>
                            <div class="tooltip">Este é o número de totens em estado Crítico (2 ou mais componentes
                                apresentando problema).</div>
                        </a>
                        <a href="totens.html" class="card-status" id="gray-card">
                            <span id="statusInativo">0</span>
                            <h3>Desligados</h3>
                            <div class="tooltip">Este é o número de totens desligados.</div>
                        </a>
                    </div>

                    <div class="status-canvas">
                        <canvas id="status-canvas"></canvas>
                    </div>
                </div>
            </section>
            <section class="bottom-cards">
                <div class="tooltip-card" id="tooltip-card3">
                    <div class="card-title">
                        <h1>Média de uso dos componentes - <span class="date"></span></h1>
                        <a onclick="openTooltip(3)"><img src="./assets/ajuda.png" alt=""></a>
                    </div>
                    <p>Este indicador mostra a média de uso em porcentagem por componente. Ele fornece informações sobre como os componentes estão sendo utilizados.
                    </p>
                </div>
                <div class="uptime" id="card3">
                    <div class="card-title">
                        <h1>Média de uso dos componentes - <span class="date"></span></h1>
                        <a onclick="openTooltip(3)"><img src="./assets/ajuda.png" alt=""></a>
                    </div>
                    <div class="uptime-canvas">
                        <canvas id="uptime-canvas"></canvas>
                    </div>
                </div>
                <div class="tooltip-card" id="tooltip-card4">
                    <div class="card-title">
                        <h1>Uptime dos totens - <span class="date"></span></h1>
                        <a onclick="openTooltip(4)"><img src="./assets/ajuda.png" alt=""></a>
                    </div>
                    <p>Este indicador exibe informações sobre o uptime atual dos seus totens. Ele mostra em horas o tempo em que seus totens estiveram em funcionamento.
                    </p>
                </div>
                <div class="efficiency" id="card4">
                    <div class="card-title">
                        <h1>Uptime dos totens - <span class="date"></span></h1>
                        <a onclick="openTooltip(4)"><img src="./assets/ajuda.png" alt=""></a>
                    </div>
                    <div class="efficiency-canvas">
                        <canvas id="efficiency-canvas"></canvas>
                    </div>
                </div>
            </section>
            </section>
        </main>

    </div>
    </div>
    </div>

    <div id="total-totems-text" class='total-totems-text'>
    </div> 

</body>

</html>

<script>
    function openTooltip(numero) {
        const tooltip = document.getElementById(`tooltip-card${numero}`);
        const card = document.getElementById(`card${numero}`);
        const totemText = document.getElementById(`total-totems-text`);

        if (card.style.display == 'none') {
            card.style.display = 'flex';
            tooltip.style.display = 'none';
            totemText.style.display = 'flex';
        } else {
            card.style.display = 'none';
            tooltip.style.display = 'flex';
            totemText.style.display = 'none';
        }
    }
</script>